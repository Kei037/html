<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        /* # 공공데이터 포털에서 '인천국제공항공사_버스정보' 검색
        # https://www.data.go.kr/data/15095045/openapi.do
        # 인천국제공항 여객터미널 T1,T2 버스 정보(공항행 첫차/막차,종점행 첫차/막차,성인요금,
        # 버스등급,버스번호,지역,운수사,평일시간,주말시간,노선정보,승차위치)를 제공

        -> 대구로 오는 버스노선만 테이블 형식으로 출력 */
        document.addEventListener('DOMContentLoaded', () => {
            const btns = document.querySelectorAll('[type=button]');

            const getUrl = () => {
                const serviceKey = 'eClc8eKTygrd%2BejSIWt%2FbEA7ZN4R7xuAnGOIVXmUfHlDlCC%2FjZtjwaiFe1mjMj770Rwkd9mGI26k9nMogdJoeg%3D%3D';

                const parameter = `?serviceKey=${serviceKey}&area=6&numOfRows=50&pageNo=1&type=json`
                return 'http://apis.data.go.kr/B551177/BusInformation/getBusInfo' + parameter
            }
            console.log(getUrl())

            const printBus = function (url) {
                const xhr = new XMLHttpRequest();
                xhr.open('GET', url);
                xhr.onreadystatechange = () => {
                    if (xhr.readyState !== XMLHttpRequest.DONE) return;

                    if (xhr.status === 200) {
                        jsonData = JSON.parse(xhr.response)
                        const busItem = jsonData.response.body.items;
                        console.log(busItem)

                        for (let entry in busItem) {
                            console.log(typeof entry)
                            if (entry['routeinfo'] === '대구') {
                                console.log('대구찾아따')
                            }
                        }

                        // if entry['routeinfo'].find('대구') > 0:
                        // new_item[name_list[0]] = entry['busnumber']
                        // new_item[name_list[1]] = entry['busclass']
                        // new_item[name_list[2]] = entry['adultfare']
                        //
                        // new_item[name_list[3]] = sort_str(entry['t1wdayt'], entry['t2wdayt'])
                        // new_item[name_list[4]] = sort_str(entry['t1wt'], entry['t2wt'])
                        //
                        // item_list.append(new_item)

                    } else {
                        console.error('Error', xhr.status, xhr.statusText);
                    }
                }
                xhr.send();
            }
            printBus(getUrl())
        })
    </script>
</head>
<body>
    <table>
        <tr>
            <th>버스번호</th>
            <th>버스등급</th>
            <th>성인요금</th>
            <th>평일시긴표</th>
            <th>주말시간표</th>
        </tr>
        <tr>
            <td></td>
        </tr>
    </table>
</body>
</html>
</body>
</html>